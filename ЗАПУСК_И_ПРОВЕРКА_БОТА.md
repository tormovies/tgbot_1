# Как запускать бота и проверять, что он работает

Путь на сервере: `~/bot.snovidec.ru/public_html/tgbot98`

---

## 1. Запуск бота

Подключись по SSH к серверу и выполни:

```bash
cd ~/bot.snovidec.ru/public_html/tgbot98
nohup php bot.php >> data/bot.log 2>&1 &
```

Бот будет работать в фоне. Команда сразу вернёт тебя в строку ввода.

---

## 2. Проверить, что процесс запущен

```bash
pgrep -af bot.php
```

**Если бот работает** — появится строка вроде:
```
12345 php bot.php
```

**Если ничего не вывело** — процесса нет, бот не запущен. Запусти снова (п. 1).

---

## 3. Проверить по логу

Последние строки лога:

```bash
tail -20 ~/bot.snovidec.ru/public_html/tgbot98/data/bot.log
```

При запуске там должна быть строка: `Бот запущен. Ожидание сообщений...`

После того как напишешь боту в Telegram **/son**, в логе должна появиться строка вида: `[OK] Команда /son от user_id=...`

---

## 4. Проверка в Telegram

1. Открой бота в Telegram (в личку).
2. Напиши команду: **/son** (обязательно со слэшем).
3. Бот должен ответить: «Опиши сон в следующем сообщении».
4. Напиши любой текст (например: «мне снилось море»).
5. В личку должна прийти расшифровка от бота.

Если шаги 2–5 срабатывают — бот работает.

---

## 5. Остановить бота

Если нужно выключить бота (например, перед обновлением):

```bash
pkill -f "php bot.php"
```

Проверь, что процесса нет: `pgrep -af bot.php` (ничего не должно вывести).

---

## 6. Перезапуск (после обновления кода или конфига)

```bash
cd ~/bot.snovidec.ru/public_html/tgbot98
git pull origin main
pkill -f "php bot.php"
nohup php bot.php >> data/bot.log 2>&1 &
```

Потом снова проверь: `pgrep -af bot.php` и тест **/son** в Telegram.

---

## Краткая шпаргалка

| Действие        | Команда |
|-----------------|--------|
| Запустить       | `cd ~/bot.snovidec.ru/public_html/tgbot98 && nohup php bot.php >> data/bot.log 2>&1 &` |
| Проверить процесс | `pgrep -af bot.php` |
| Смотреть лог    | `tail -20 ~/bot.snovidec.ru/public_html/tgbot98/data/bot.log` |
| Остановить      | `pkill -f "php bot.php"` |
| Перезапустить    | `pkill -f "php bot.php"` затем снова команда запуска из таблицы |
